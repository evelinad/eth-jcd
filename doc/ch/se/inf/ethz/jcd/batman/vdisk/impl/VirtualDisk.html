<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_17) on Mon Apr 08 15:45:16 CEST 2013 -->
<title>VirtualDisk</title>
<meta name="date" content="2013-04-08">
<link rel="stylesheet" type="text/css" href="../../../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="VirtualDisk";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/VirtualDisk.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDirectory.html" title="class in ch.se.inf.ethz.jcd.batman.vdisk.impl"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDiskEntry.html" title="class in ch.se.inf.ethz.jcd.batman.vdisk.impl"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../index.html?ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html" target="_top">Frames</a></li>
<li><a href="VirtualDisk.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">ch.se.inf.ethz.jcd.batman.vdisk.impl</div>
<h2 title="Class VirtualDisk" class="title">Class VirtualDisk</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>ch.se.inf.ethz.jcd.batman.vdisk.impl.VirtualDisk</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDisk</a>, java.io.Closeable, java.lang.AutoCloseable</dd>
</dl>
<hr>
<br>
<pre>public final class <span class="strong">VirtualDisk</span>
extends java.lang.Object
implements <a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDisk</a></pre>
<div class="block">Implementation of <a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk"><code>IVirtualDisk</code></a>
 
 The VirtualDisk needs at least 192(superblock) + 128(root directory entry)
 byte to store its meta data. The first 192 byte are structured as follows:
 
 0x00 8byte MagicNumber 
 0x08 8byte Root Directory offset 
 0x10 8byte Reserved
 0x18 168byte FreeLists
 
 The first entry after the free lists is usually the root directory. But
 because there is an offset saved in the superblock which gives the offset of
 the root directory, it could also be saved in another place.
 
 The VirtualDisk will dynamically increase the underlying file and add the new
 space to the free lists. Which are used when new <a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IDataBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk"><code>IDataBlock</code></a> need to be 
 allocated.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.io.RandomAccessFile</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#file">file</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#FREE_LISTS_POSITION">FREE_LISTS_POSITION</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.List&lt;java.lang.Long&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#freeLists">freeLists</a></strong></code>
<div class="block">Holds the offset position of the start of each free list.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#MIN_BLOCK_SIZE">MIN_BLOCK_SIZE</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#NR_FREE_LISTS">NR_FREE_LISTS</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#path">path</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#POSITION_SIZE">POSITION_SIZE</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#ROOT_DIRECTORY_NAME">ROOT_DIRECTORY_NAME</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#ROOT_DIRECTORY_POSITION">ROOT_DIRECTORY_POSITION</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDirectory.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDirectory</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#rootDirectory">rootDirectory</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#SUPERBLOCK_SIZE">SUPERBLOCK_SIZE</a></strong></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_ch.se.inf.ethz.jcd.batman.vdisk.IVirtualDisk">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;ch.se.inf.ethz.jcd.batman.vdisk.<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDisk</a></h3>
<code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html#MAGIC_NUMBER">MAGIC_NUMBER</a>, <a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html#PATH_SEPARATOR">PATH_SEPARATOR</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private </code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#VirtualDisk(java.lang.String)">VirtualDisk</a></strong>(java.lang.String&nbsp;path)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#addFreeBlockToList(ch.se.inf.ethz.jcd.batman.vdisk.IFreeBlock)">addFreeBlockToList</a></strong>(<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IFreeBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IFreeBlock</a>&nbsp;block)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IDataBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IDataBlock</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#allocateBlock(long)">allocateBlock</a></strong>(long&nbsp;dataSize)</code>
<div class="block">Allocates <a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IDataBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk"><code>IDataBlock</code></a> to store the number of bytes given by size.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#close()">close</a></strong>()</code></td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDisk</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#create(java.lang.String)">create</a></strong>(java.lang.String&nbsp;path)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDirectory.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDirectory</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#createDirectory(ch.se.inf.ethz.jcd.batman.vdisk.IVirtualDirectory, java.lang.String)">createDirectory</a></strong>(<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDirectory.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDirectory</a>&nbsp;parent,
               java.lang.String&nbsp;name)</code>
<div class="block">Creates a directory in the virtual disk with the given name.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#createDisk()">createDisk</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualFile.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualFile</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#createFile(ch.se.inf.ethz.jcd.batman.vdisk.IVirtualDirectory, java.lang.String, long)">createFile</a></strong>(<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDirectory.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDirectory</a>&nbsp;parent,
          java.lang.String&nbsp;name,
          long&nbsp;size)</code>
<div class="block">Creates a file in the virtual disk with the given name.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#createRootDirectory()">createRootDirectory</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private <a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IFreeBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IFreeBlock</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#extend(long)">extend</a></strong>(long&nbsp;amount)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#finalize()">finalize</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#freeBlock(ch.se.inf.ethz.jcd.batman.vdisk.IDataBlock)">freeBlock</a></strong>(<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IDataBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IDataBlock</a>&nbsp;block)</code>
<div class="block">Invalidates the <a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IDataBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk"><code>IDataBlock</code></a> given by block and marks the space
 previously occupied by the <a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IDataBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk"><code>IDataBlock</code></a> as free.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#freeRange(long, long)">freeRange</a></strong>(long&nbsp;position,
         long&nbsp;size)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#getFreeListIndex(long)">getFreeListIndex</a></strong>(long&nbsp;length)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#getFreeSpace()">getFreeSpace</a></strong>()</code>
<div class="block">Returns the amount of free space in the virtual disk.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.net.URI</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#getHostLocation()">getHostLocation</a></strong>()</code>
<div class="block">Returns a URI that represents the location of the virtual disk on a host
 system</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#getOccupiedSpace()">getOccupiedSpace</a></strong>()</code>
<div class="block">Returns the amount of occupied space in the virtual disk.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDirectory.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDirectory</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#getRootDirectory()">getRootDirectory</a></strong>()</code>
<div class="block">Returns the root directory of the virtual disk.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#getSize()">getSize</a></strong>()</code>
<div class="block">Returns the size in bytes used to store the virtual disk.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#initializeFreeList()">initializeFreeList</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#isBlockSplittable(ch.se.inf.ethz.jcd.batman.vdisk.IFreeBlock, long)">isBlockSplittable</a></strong>(<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IFreeBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IFreeBlock</a>&nbsp;block,
                 long&nbsp;size)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#isFirstBlock(long)">isFirstBlock</a></strong>(long&nbsp;position)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#isLastBlock(long, long)">isLastBlock</a></strong>(long&nbsp;position,
           long&nbsp;size)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDisk</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#load(java.lang.String)">load</a></strong>(java.lang.String&nbsp;path)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#loadDisk()">loadDisk</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#loadRootDirectory()">loadRootDirectory</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>byte</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#read(long)">read</a></strong>(long&nbsp;pos)</code>
<div class="block">Reads a signed eight-bit value from the underlying file at offset given
 by pos.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#read(long, byte[])">read</a></strong>(long&nbsp;pos,
    byte[]&nbsp;b)</code>
<div class="block">Reads up to b.length bytes of data from the underlying file into an array
 of bytes starting at the offset given by pos.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#read(long, byte[], int, int)">read</a></strong>(long&nbsp;pos,
    byte[]&nbsp;b,
    int&nbsp;offset,
    int&nbsp;length)</code>
<div class="block">Reads up to length bytes of data from the underlying file starting at the
 offset given by pos into an array of bytes</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#readFreeLists()">readFreeLists</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#removeFreeBlockFromList(ch.se.inf.ethz.jcd.batman.vdisk.IFreeBlock)">removeFreeBlockFromList</a></strong>(<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IFreeBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IFreeBlock</a>&nbsp;block)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#shrink(long)">shrink</a></strong>(long&nbsp;amount)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IDataBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IDataBlock</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#splitBlock(ch.se.inf.ethz.jcd.batman.vdisk.IFreeBlock, long, long)">splitBlock</a></strong>(<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IFreeBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IFreeBlock</a>&nbsp;freeBlock,
          long&nbsp;size,
          long&nbsp;dataSize)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#write(long, byte)">write</a></strong>(long&nbsp;pos,
     byte&nbsp;b)</code>
<div class="block">Write the specified byte to the underlying file at the offset given by
 pos.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#write(long, byte[])">write</a></strong>(long&nbsp;pos,
     byte[]&nbsp;b)</code>
<div class="block">Write the specified byte array to the underlying file at the offset given
 by pos.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html#write(long, byte[], int, int)">write</a></strong>(long&nbsp;pos,
     byte[]&nbsp;b,
     int&nbsp;offset,
     int&nbsp;length)</code>
<div class="block">Writes length bytes from the specified byte array starting at offset off
 to the underlying file at the offset given by pos.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="SUPERBLOCK_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SUPERBLOCK_SIZE</h4>
<pre>private static final&nbsp;int SUPERBLOCK_SIZE</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../../../constant-values.html#ch.se.inf.ethz.jcd.batman.vdisk.impl.VirtualDisk.SUPERBLOCK_SIZE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="FREE_LISTS_POSITION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FREE_LISTS_POSITION</h4>
<pre>private static final&nbsp;int FREE_LISTS_POSITION</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../../../constant-values.html#ch.se.inf.ethz.jcd.batman.vdisk.impl.VirtualDisk.FREE_LISTS_POSITION">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="POSITION_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>POSITION_SIZE</h4>
<pre>private static final&nbsp;int POSITION_SIZE</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../../../constant-values.html#ch.se.inf.ethz.jcd.batman.vdisk.impl.VirtualDisk.POSITION_SIZE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="NR_FREE_LISTS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>NR_FREE_LISTS</h4>
<pre>private static final&nbsp;int NR_FREE_LISTS</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../../../constant-values.html#ch.se.inf.ethz.jcd.batman.vdisk.impl.VirtualDisk.NR_FREE_LISTS">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ROOT_DIRECTORY_NAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ROOT_DIRECTORY_NAME</h4>
<pre>private static final&nbsp;java.lang.String ROOT_DIRECTORY_NAME</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../../../constant-values.html#ch.se.inf.ethz.jcd.batman.vdisk.impl.VirtualDisk.ROOT_DIRECTORY_NAME">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="MIN_BLOCK_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MIN_BLOCK_SIZE</h4>
<pre>private static final&nbsp;long MIN_BLOCK_SIZE</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../../../constant-values.html#ch.se.inf.ethz.jcd.batman.vdisk.impl.VirtualDisk.MIN_BLOCK_SIZE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ROOT_DIRECTORY_POSITION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ROOT_DIRECTORY_POSITION</h4>
<pre>private static final&nbsp;long ROOT_DIRECTORY_POSITION</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../../../constant-values.html#ch.se.inf.ethz.jcd.batman.vdisk.impl.VirtualDisk.ROOT_DIRECTORY_POSITION">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="file">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>file</h4>
<pre>private&nbsp;java.io.RandomAccessFile file</pre>
</li>
</ul>
<a name="rootDirectory">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rootDirectory</h4>
<pre>private&nbsp;<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDirectory.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDirectory</a> rootDirectory</pre>
</li>
</ul>
<a name="freeLists">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>freeLists</h4>
<pre>private final&nbsp;java.util.List&lt;java.lang.Long&gt; freeLists</pre>
<div class="block">Holds the offset position of the start of each free list. The free lists
 are handled as follows: 
 FreeListIndex : Size of blocks in the free list 
 1             : 128*2^0-128*2^1 - 1 
 2             : 128*2^1-128*2^2 - 1 
 ... 
 21            : 128*2^21-infinity</div>
</li>
</ul>
<a name="path">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>path</h4>
<pre>private final&nbsp;java.lang.String path</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="VirtualDisk(java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>VirtualDisk</h4>
<pre>private&nbsp;VirtualDisk(java.lang.String&nbsp;path)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="load(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>load</h4>
<pre>public static&nbsp;<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDisk</a>&nbsp;load(java.lang.String&nbsp;path)
                         throws java.io.IOException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="create(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>create</h4>
<pre>public static&nbsp;<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDisk</a>&nbsp;create(java.lang.String&nbsp;path)
                           throws java.io.IOException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="loadDisk()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadDisk</h4>
<pre>private&nbsp;void&nbsp;loadDisk()
               throws java.io.IOException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="loadRootDirectory()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadRootDirectory</h4>
<pre>private&nbsp;void&nbsp;loadRootDirectory()
                        throws java.io.IOException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="createDisk()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createDisk</h4>
<pre>private&nbsp;void&nbsp;createDisk()
                 throws java.io.IOException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="extend(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>extend</h4>
<pre>private&nbsp;<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IFreeBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IFreeBlock</a>&nbsp;extend(long&nbsp;amount)
                   throws java.io.IOException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="shrink(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shrink</h4>
<pre>private&nbsp;void&nbsp;shrink(long&nbsp;amount)
             throws java.io.IOException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="initializeFreeList()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initializeFreeList</h4>
<pre>private&nbsp;void&nbsp;initializeFreeList()
                         throws java.io.IOException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="createRootDirectory()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createRootDirectory</h4>
<pre>private&nbsp;void&nbsp;createRootDirectory()
                          throws java.io.IOException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="finalize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finalize</h4>
<pre>protected&nbsp;void&nbsp;finalize()
                 throws java.lang.Throwable</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>finalize</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.Throwable</code></dd></dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()
           throws java.io.IOException</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.io.Closeable</code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.lang.AutoCloseable</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="getSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSize</h4>
<pre>public&nbsp;long&nbsp;getSize()
             throws java.io.IOException</pre>
<div class="block">Returns the size in bytes used to store the virtual disk.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html#getSize()">getSize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDisk</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the size in bytes used to store the virtual disk</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O error occurs</dd></dl>
</li>
</ul>
<a name="getRootDirectory()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRootDirectory</h4>
<pre>public&nbsp;<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDirectory.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDirectory</a>&nbsp;getRootDirectory()</pre>
<div class="block">Returns the root directory of the virtual disk.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html#getRootDirectory()">getRootDirectory</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDisk</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the root directory of the virtual disk</dd></dl>
</li>
</ul>
<a name="createDirectory(ch.se.inf.ethz.jcd.batman.vdisk.IVirtualDirectory, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createDirectory</h4>
<pre>public&nbsp;<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDirectory.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDirectory</a>&nbsp;createDirectory(<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDirectory.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDirectory</a>&nbsp;parent,
                                java.lang.String&nbsp;name)
                                  throws java.io.IOException</pre>
<div class="block">Creates a directory in the virtual disk with the given name.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html#createDirectory(ch.se.inf.ethz.jcd.batman.vdisk.IVirtualDirectory, java.lang.String)">createDirectory</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDisk</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>parent</code> - the parent of the newly created directory</dd><dd><code>name</code> - the name of the newly created directory</dd>
<dt><span class="strong">Returns:</span></dt><dd>the created directory</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if the directory name was invalid or an I/O error occurred</dd></dl>
</li>
</ul>
<a name="createFile(ch.se.inf.ethz.jcd.batman.vdisk.IVirtualDirectory, java.lang.String, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createFile</h4>
<pre>public&nbsp;<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualFile.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualFile</a>&nbsp;createFile(<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDirectory.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDirectory</a>&nbsp;parent,
                      java.lang.String&nbsp;name,
                      long&nbsp;size)
                        throws java.io.IOException</pre>
<div class="block">Creates a file in the virtual disk with the given name.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html#createFile(ch.se.inf.ethz.jcd.batman.vdisk.IVirtualDirectory, java.lang.String, long)">createFile</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDisk</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>parent</code> - the parent of the newly created file</dd><dd><code>name</code> - the name of the newly created file</dd>
<dt><span class="strong">Returns:</span></dt><dd>the created file</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if the file name was invalid or an I/O error occurred</dd></dl>
</li>
</ul>
<a name="write(long, byte)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>write</h4>
<pre>public&nbsp;void&nbsp;write(long&nbsp;pos,
         byte&nbsp;b)
           throws java.io.IOException</pre>
<div class="block">Write the specified byte to the underlying file at the offset given by
 pos.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html#write(long, byte)">write</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDisk</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>pos</code> - the offset position</dd><dd><code>b</code> - the byte to be written</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O error occurs</dd></dl>
</li>
</ul>
<a name="write(long, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>write</h4>
<pre>public&nbsp;void&nbsp;write(long&nbsp;pos,
         byte[]&nbsp;b)
           throws java.io.IOException</pre>
<div class="block">Write the specified byte array to the underlying file at the offset given
 by pos.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html#write(long, byte[])">write</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDisk</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>pos</code> - the offset position</dd><dd><code>b</code> - the data</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O error occurs</dd></dl>
</li>
</ul>
<a name="read(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;byte&nbsp;read(long&nbsp;pos)
          throws java.io.IOException</pre>
<div class="block">Reads a signed eight-bit value from the underlying file at offset given
 by pos.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html#read(long)">read</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDisk</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>pos</code> - the offset at which the byte should be read.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the byte which was read</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O error occurs</dd></dl>
</li>
</ul>
<a name="read(long, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;int&nbsp;read(long&nbsp;pos,
       byte[]&nbsp;b)
         throws java.io.IOException</pre>
<div class="block">Reads up to b.length bytes of data from the underlying file into an array
 of bytes starting at the offset given by pos.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html#read(long, byte[])">read</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDisk</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>pos</code> - the offset at which the byte array should be read.</dd><dd><code>b</code> - the buffer into which the data is read.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the total number of bytes written into b</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O error occurs</dd></dl>
</li>
</ul>
<a name="write(long, byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>write</h4>
<pre>public&nbsp;void&nbsp;write(long&nbsp;pos,
         byte[]&nbsp;b,
         int&nbsp;offset,
         int&nbsp;length)
           throws java.io.IOException</pre>
<div class="block">Writes length bytes from the specified byte array starting at offset off
 to the underlying file at the offset given by pos.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html#write(long, byte[], int, int)">write</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDisk</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>pos</code> - the offset position</dd><dd><code>b</code> - the data</dd><dd><code>offset</code> - the start offset in the data.</dd><dd><code>length</code> - the number of bytes to write.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O error occurs</dd></dl>
</li>
</ul>
<a name="read(long, byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;int&nbsp;read(long&nbsp;pos,
       byte[]&nbsp;b,
       int&nbsp;offset,
       int&nbsp;length)
         throws java.io.IOException</pre>
<div class="block">Reads up to length bytes of data from the underlying file starting at the
 offset given by pos into an array of bytes</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html#read(long, byte[], int, int)">read</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDisk</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>pos</code> - the offset at which the byte array should be read.</dd><dd><code>b</code> - the buffer into which the data is read.</dd><dd><code>offset</code> - the start offset in array b at which the data is written.</dd><dd><code>length</code> - the maximum number of bytes read</dd>
<dt><span class="strong">Returns:</span></dt><dd>the total number of bytes written into b</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O error occurs</dd></dl>
</li>
</ul>
<a name="freeBlock(ch.se.inf.ethz.jcd.batman.vdisk.IDataBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>freeBlock</h4>
<pre>public&nbsp;void&nbsp;freeBlock(<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IDataBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IDataBlock</a>&nbsp;block)
               throws java.io.IOException</pre>
<div class="block">Invalidates the <a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IDataBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk"><code>IDataBlock</code></a> given by block and marks the space
 previously occupied by the <a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IDataBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk"><code>IDataBlock</code></a> as free.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html#freeBlock(ch.se.inf.ethz.jcd.batman.vdisk.IDataBlock)">freeBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDisk</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>block</code> - the block to free.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O error occurs</dd></dl>
</li>
</ul>
<a name="getHostLocation()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHostLocation</h4>
<pre>public&nbsp;java.net.URI&nbsp;getHostLocation()</pre>
<div class="block">Returns a URI that represents the location of the virtual disk on a host
 system</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html#getHostLocation()">getHostLocation</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDisk</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the URI to the host location of the virtual disk</dd></dl>
</li>
</ul>
<a name="removeFreeBlockFromList(ch.se.inf.ethz.jcd.batman.vdisk.IFreeBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeFreeBlockFromList</h4>
<pre>private&nbsp;void&nbsp;removeFreeBlockFromList(<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IFreeBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IFreeBlock</a>&nbsp;block)
                              throws java.io.IOException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="addFreeBlockToList(ch.se.inf.ethz.jcd.batman.vdisk.IFreeBlock)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addFreeBlockToList</h4>
<pre>private&nbsp;void&nbsp;addFreeBlockToList(<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IFreeBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IFreeBlock</a>&nbsp;block)
                         throws java.io.IOException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="getFreeListIndex(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFreeListIndex</h4>
<pre>private&nbsp;int&nbsp;getFreeListIndex(long&nbsp;length)</pre>
</li>
</ul>
<a name="isFirstBlock(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isFirstBlock</h4>
<pre>private&nbsp;boolean&nbsp;isFirstBlock(long&nbsp;position)</pre>
</li>
</ul>
<a name="isLastBlock(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isLastBlock</h4>
<pre>private&nbsp;boolean&nbsp;isLastBlock(long&nbsp;position,
                  long&nbsp;size)
                     throws java.io.IOException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="freeRange(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>freeRange</h4>
<pre>private&nbsp;void&nbsp;freeRange(long&nbsp;position,
             long&nbsp;size)
                throws java.io.IOException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="isBlockSplittable(ch.se.inf.ethz.jcd.batman.vdisk.IFreeBlock, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isBlockSplittable</h4>
<pre>private&nbsp;boolean&nbsp;isBlockSplittable(<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IFreeBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IFreeBlock</a>&nbsp;block,
                        long&nbsp;size)</pre>
</li>
</ul>
<a name="splitBlock(ch.se.inf.ethz.jcd.batman.vdisk.IFreeBlock, long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>splitBlock</h4>
<pre>private&nbsp;<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IDataBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IDataBlock</a>&nbsp;splitBlock(<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IFreeBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IFreeBlock</a>&nbsp;freeBlock,
                    long&nbsp;size,
                    long&nbsp;dataSize)
                       throws java.io.IOException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="allocateBlock(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocateBlock</h4>
<pre>public&nbsp;<a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IDataBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IDataBlock</a>[]&nbsp;allocateBlock(long&nbsp;dataSize)
                           throws java.io.IOException</pre>
<div class="block">Allocates <a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IDataBlock.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk"><code>IDataBlock</code></a> to store the number of bytes given by size.
 The blocks are returned as an array and internally linked with a linked
 list. Which means the first block has set next to the second block and so
 on.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html#allocateBlock(long)">allocateBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDisk</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>dataSize</code> - the number of bytes the data blocks have to be able to store</dd>
<dt><span class="strong">Returns:</span></dt><dd>the allocated blocks</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O error occurs</dd></dl>
</li>
</ul>
<a name="readFreeLists()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readFreeLists</h4>
<pre>private&nbsp;void&nbsp;readFreeLists()
                    throws java.io.IOException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="getFreeSpace()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFreeSpace</h4>
<pre>public&nbsp;long&nbsp;getFreeSpace()
                  throws java.io.IOException</pre>
<div class="block">Returns the amount of free space in the virtual disk.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html#getFreeSpace()">getFreeSpace</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDisk</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the amount of free space in bytes in the virtual disk</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O error occurs</dd></dl>
</li>
</ul>
<a name="getOccupiedSpace()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getOccupiedSpace</h4>
<pre>public&nbsp;long&nbsp;getOccupiedSpace()
                      throws java.io.IOException</pre>
<div class="block">Returns the amount of occupied space in the virtual disk.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html#getOccupiedSpace()">getOccupiedSpace</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/IVirtualDisk.html" title="interface in ch.se.inf.ethz.jcd.batman.vdisk">IVirtualDisk</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the amount of occupied space in bytes in the virtual disk</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O error occurs</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/VirtualDisk.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDirectory.html" title="class in ch.se.inf.ethz.jcd.batman.vdisk.impl"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../../../ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDiskEntry.html" title="class in ch.se.inf.ethz.jcd.batman.vdisk.impl"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../../../index.html?ch/se/inf/ethz/jcd/batman/vdisk/impl/VirtualDisk.html" target="_top">Frames</a></li>
<li><a href="VirtualDisk.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
